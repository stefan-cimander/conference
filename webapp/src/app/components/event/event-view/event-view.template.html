<div class="event-details-container">


  <div class="navigation-area">
    <a href="/events#{{ event.id }}">
      <md-icon>arrow_back</md-icon>
      <p>Event List</p>
    </a>
  </div>
  <md-card class="details-card">

    <div *ngIf="authService.loggedIn && event.favored" class="favor-indicator">
      <md-icon>star</md-icon>
    </div>

    <p id="eventType">{{ event.eventType }} - {{ event.duration }}Â min</p>
    <h2 md-title>{{ event.title }}</h2>
    <div class="event-detail" *ngIf="event.startTime && event.startTime.isValid()">
      <md-icon>today</md-icon>
      <p>{{ getFormattedEventDate() }}</p>
    </div>
    <div class="event-detail" *ngIf="event.startTime && event.startTime.isValid()">
      <md-icon>access_time</md-icon>
      <p>{{ getFormattedEventTime() }}</p>
    </div>
    <div
      *ngIf="event.room"
      class="event-detail room-link"
      [routerLink]="[ '/directions', event.room.id ]"
    >
      <md-icon>room</md-icon>
      <p>{{ event.room.name }}</p>
    </div>
    <br>
    <div class="event-detail">
      <md-icon>person_outline</md-icon>
      <p>{{ event.speakers[0].name }}</p>
    </div>
    <div class="event-detail" *ngIf="event.speakers[0].institution">
      <md-icon>business</md-icon>
      <p>{{ event.speakers[0].institution.name }}</p>
    </div>

    <div class="align-right">
      <span *ngIf="authService.loggedIn">
        <button
          *ngIf="!event.favored"
          md-button
          color="accent"
          (click)="setFavorState(event, true)"
        >
          {{ event.starttime ? 'Add to my schedule' : 'Mark' }}
        </button>
        <button
          *ngIf="event.favored"
          md-button color="accent"
          (click)="setFavorState(event, false)"
        >
          {{ event.starttime ? 'Remove from my schedule' : 'Unmark' }}
        </button>
      </span>
    </div>
  </md-card>

  <md-list>
    <h3 md-subheader>Paper</h3>
    <md-card class="details-card">
      <div *ngIf="event.paper">
        <div class="paper-title">
          <a
            *ngIf="event.paper.link"
            md-button
            color="accent"
            [href]="event.paper.link"
            target="_blank"
          >
            <md-icon>file_download</md-icon>
            Download
          </a>
        </div>

        <h5 *ngIf="event.paper.authors && event.paper.authors.length==1">Author</h5>
        <h5 *ngIf="event.paper.authors && event.paper.authors.length>1">Authors</h5>
        <ul class="paper-authors">
          <li *ngFor="let author of event.paper.authors"><a [routerLink]="'/person/' + author.id">{{ author.name }}</a></li>
        </ul>

        <h5 *ngIf="event.paper.tag">Tag</h5>
        <p *ngIf="event.paper.tag">{{ event.paper.tag }}</p>

        <h5 *ngIf="event.paper.keywords">Keywords</h5>
        <ul class="keywords">
          <li *ngFor="let keyword of event.paper.keywords">
            {{ keyword }}
          </li>
        </ul>

        <h5 *ngIf="event.paper.abstract">Abstract</h5>
        <p *ngIf="event.paper.abstract">{{ event.paper.abstract }}</p>
      </div>
    </md-card>
  </md-list>

  <md-list *ngIf="isAuthorised">
    <h3 md-subheader>Event Ressources Upload</h3>
    <md-card class="details-card">
      <h5>As an authorized person for this event, you can upload resources like slides or posters.</h5>
      <upload-tool [event]="event"></upload-tool>
    </md-card>
  </md-list>

  <md-list>
    <h3 md-subheader>Comments</h3>
    <md-card class="details-card">
      <h5>You can ask a question here:</h5>
      <question-tool [event]="event"></question-tool>
    </md-card>
  </md-list>
</div>
